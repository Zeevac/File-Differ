<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="index.css" type="text/css">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <pre>package com.development.mapkit;</pre><pre></pre><pre><span>import</span> android.content.Context;</pre><pre><span>import</span> android.graphics.Point;</pre><pre><span>import</span> android.support.annotation.Nullable;</pre><pre></pre><pre><span>import</span> com.development.mapkit.components.CircleCapsule;</pre><pre><span>import</span> com.development.mapkit.components.GroundOverlayCapsule;</pre><pre><span>import</span> com.development.mapkit.components.MapComponent;</pre><pre><span>import</span> com.development.mapkit.components.MapComponentType;</pre><pre><span>import</span> com.development.mapkit.components.MarkerCapsule;</pre><pre><span>import</span> com.development.mapkit.components.PolygonCapsule;</pre><pre><span>import</span> com.development.mapkit.components.PolylineCapsule;</pre><pre><span>import</span> com.development.mapkit.components.TileOverlayCapsule;</pre><pre><span>import</span> com.development.mapkit.listeners.MapListener;</pre><pre><span>import</span> com.development.mapkit.utils.json.JsonToObject;</pre><pre><span>import</span> com.development.mapkit.utils.json.ObjectToJson;</pre><pre><span>import</span> com.huawei.hms.maps.HuaweiMap;</pre><pre><span>import</span> com.huawei.hms.maps.TextureMapView;</pre><pre><span>import</span> com.huawei.hms.maps.model.LatLng;</pre><pre></pre><pre><span>import</span> org.json.JSONException;</pre><pre><span>import</span> org.json.JSONObject;</pre><pre></pre><pre><span>import</span> java.lang.reflect.InvocationTargetException;</pre><pre><span>import</span> java.lang.reflect.Method;</pre><pre><span>import</span> java.util.HashMap;</pre><pre><span>import</span> java.util.Map;</pre><pre></pre><pre></pre><pre><span>public</span> final class MapCapsule {</pre><pre></pre><pre style='color:green;'>    public static final String TAG = MapCapsule.class.getSimpleName();</pre><pre style='color:green;'>    private static int id = 0;</pre><pre style='color:green;'>    private int capsuleId;</pre><pre style='color:green;'>    private TextureMapView textureMapView;</pre><pre style='color:green;'>    private HuaweiMap huaweiMap;</pre><pre style='color:green;'>    private Map<Integer, MapComponent> componentMap;</pre><pre></pre><pre>    <span>private</span> final UiSettingsSetter uiSettingsSetter = <span>new</span> UiSettingsSetter();</pre><pre>    <span>private</span> final HuaweiMapSetter huaweiMapSetter = <span>new</span> HuaweiMapSetter();</pre><pre>    <span>private</span> final HuaweiMapGetter huaweiMapGetter = <span>new</span> HuaweiMapGetter();</pre><pre>    <span>private</span> MapListener mapListener;</pre><pre></pre><pre>    <span>public</span> MapCapsule(Context mContext, MapListener mapListener, @Nullable JSONObject mapOptions) {</pre><pre>        capsuleId = ++id;</pre><pre>        componentMap = <span>new</span> HashMap<>();</pre><pre>        this.mapListener = mapListener;</pre><pre>        textureMapView = <span>new</span> TextureMapView(mContext, JsonToObject.getInstance().constructMapOptions(mapOptions));</pre><pre>        textureMapView.onCreate(null);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject setMapListener(String eventName) <span>throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException {</pre><pre>        mapListener.bindListener(this.huaweiMap, eventName, this.capsuleId);</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> MapComponent addComponent(MapComponentType type, JSONObject json) {</pre><pre></pre><pre>        MapComponent mapComponent = null;</pre><pre>        try {</pre><pre>            <span>if</span> (type == MapComponentType.MARKER)</pre><pre>                mapComponent = <span>new</span> MarkerCapsule(huaweiMap, JsonToObject.getInstance().constructMarkerOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.CIRCLE)</pre><pre>                mapComponent = <span>new</span> CircleCapsule(huaweiMap, JsonToObject.getInstance().constructCircleOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.GROUND_OVERLAY)</pre><pre>                mapComponent = <span>new</span> GroundOverlayCapsule(huaweiMap, JsonToObject.getInstance().constructGroundOverlayOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.POLYGON)</pre><pre>                mapComponent = <span>new</span> PolygonCapsule(huaweiMap, JsonToObject.getInstance().constructPolygonOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.POLYLINE)</pre><pre>                mapComponent = <span>new</span> PolylineCapsule(huaweiMap, JsonToObject.getInstance().constructPolylineOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.TILE_OVERLAY)</pre><pre>                mapComponent = <span>new</span> TileOverlayCapsule(huaweiMap, JsonToObject.getInstance().constructTileOverlayOptions(json));</pre><pre>        } catch (JSONException e) {</pre><pre>            e.printStackTrace();</pre><pre>        }</pre><pre>        componentMap.put(mapComponent.getObjectId(), mapComponent);</pre><pre>        <span>return</span> mapComponent;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> boolean removeComponent(int componentId) {</pre><pre>        <span>if</span> (!componentMap.containsKey(componentId)) <span>return</span> false;</pre><pre>        componentMap.get(componentId).remove();</pre><pre>        componentMap.remove(componentId);</pre><pre>        <span>return</span> true;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject moveCamera(String eventName, JSONObject json) <span>throws</span> JSONException {</pre><pre>        huaweiMap.moveCamera(JsonToObject.getInstance().constructCameraUpdate(eventName, json));</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject animateCamera(String eventName, JSONObject json) <span>throws</span> JSONException {</pre><pre>        huaweiMap.animateCamera(JsonToObject.getInstance().constructCameraUpdate(eventName, json));</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre></pre><pre>    <span>public</span> JSONObject setMapOptions(String optionType, String methodName, JSONObject args) <span>throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException, JSONException {</pre><pre>        <span>if</span> (optionType.equals("setUiSettings")) <span>return</span> setMapUiSettings(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("setHuaweiMapOptions")) <span>return</span> setMapSettings(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("getHuaweiMapOptions")) <span>return</span> getMapSettings(methodName);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("moveCamera")) <span>return</span> moveCamera(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("animateCamera")) <span>return</span> animateCamera(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("setListener")) <span>return</span> setMapListener(methodName);</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>private</span> JSONObject getMapSettings(String methodName) <span>throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException {</pre><pre>        <span>return</span> huaweiMapGetter.run(methodName);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject setMapUiSettings(String methodName, JSONObject args) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>        <span>return</span> uiSettingsSetter.run(methodName, args);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject setMapSettings(String methodName, JSONObject json) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>        <span>return</span> huaweiMapSetter.run(methodName, json);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> MapComponent getComponent(int id) {</pre><pre>        <span>if</span> (componentMap.containsKey(id)) {</pre><pre>            <span>return</span> componentMap.get(id);</pre><pre>        }</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> TextureMapView getTextureMapView() {</pre><pre>        <span>return</span> textureMapView;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> <span>void</span> setHuaweiMap(HuaweiMap map) {</pre><pre>        this.huaweiMap = map;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> <span>void</span> projectionStuff() {</pre><pre>        huaweiMap.getProjection().fromScreenLocation(<span>new</span> Point(1, 2));</pre><pre>        huaweiMap.getProjection().toScreenLocation(<span>new</span> LatLng(1, 2));</pre><pre>        huaweiMap.getProjection().getVisibleRegion();</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> <span>void</span> focusedBuilding() {</pre><pre>        huaweiMap.getFocusedBuilding().getActiveLevelIndex();</pre><pre>        huaweiMap.getFocusedBuilding().getDefaultLevelIndex();</pre><pre>        huaweiMap.getFocusedBuilding().isUnderground();</pre><pre>        huaweiMap.getFocusedBuilding().getLevels();</pre><pre>    }</pre><pre></pre><pre></pre><pre>    <span>public</span> JSONObject toJson() {</pre><pre>        try {</pre><pre></pre><pre>            <span>return</span> <span>new</span> JSONObject()</pre><pre>                    .put("id", capsuleId)</pre><pre>                    .put("cameraPosition", ObjectToJson.getInstance().constructJsonFromCameraPosition(huaweiMap.getCameraPosition()))</pre><pre>                    .put("uiSettings", ObjectToJson.getInstance().constructJsonFromHuaweiMapUiSettings(huaweiMap.getUiSettings()))</pre><pre>                    .put("mapType", huaweiMap.getMapType())</pre><pre>                    .put("maxZoomLevel", huaweiMap.getMaxZoomLevel())</pre><pre>                    .put("minZoomLevel", huaweiMap.getMinZoomLevel())</pre><pre>                    .put("projection", huaweiMap.getProjection()) // change this</pre><pre>                    .put("indoorBuilding", huaweiMap.getFocusedBuilding()) // change this</pre><pre>                    .put("buildingsEnabled", huaweiMap.isBuildingsEnabled())</pre><pre>                    .put("indoorEnabled", huaweiMap.isIndoorEnabled())</pre><pre>                    .put("myLocationEnabled", huaweiMap.isMyLocationEnabled())</pre><pre>                    .put("trafficEnabled", huaweiMap.isTrafficEnabled());</pre><pre>        } catch (JSONException e) {</pre><pre>            e.printStackTrace();</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre>    }</pre><pre></pre><pre></pre><pre>    ////////////////////////////////////////////// UI SETTINGS CAPSULE ////////////////////////////////////////////////////////////</pre><pre>    ////////////////////////////////////////////// UI SETTINGS CAPSULE /////////////////////////////////////////////////////////////</pre><pre></pre><pre>    <span>private</span> class UiSettingsSetter {</pre><pre></pre><pre>        JSONObject setZoomGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setZoomGesturesEnabled(val.optBoolean("zoomGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("zoomGesturesEnabled", huaweiMap.getUiSettings().isZoomGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setTiltGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setTiltGesturesEnabled(val.optBoolean("tiltGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("tiltGesturesEnabled", huaweiMap.getUiSettings().isTiltGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setZoomControlsEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setZoomControlsEnabled(val.optBoolean("zoomControlsEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("zoomControlsEnabled", huaweiMap.getUiSettings().isZoomControlsEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setScrollGesturesEnabledDuringRotateOrZoom(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setScrollGesturesEnabledDuringRotateOrZoom(val.optBoolean("scrollGesturesEnabledDuringRotateOrZoom"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("scrollGesturesEnabledDuringRotateOrZoom", huaweiMap.getUiSettings().isScrollGesturesEnabledDuringRotateOrZoom());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setScrollGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setScrollGesturesEnabled(val.optBoolean("scrollGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("scrollGesturesEnabled", huaweiMap.getUiSettings().isScrollGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setRotateGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setRotateGesturesEnabled(val.optBoolean("rotateGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("rotateGesturesEnabled", huaweiMap.getUiSettings().isRotateGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMyLocationButtonEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setMyLocationButtonEnabled(val.optBoolean("myLocationButtonEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("myLocationButtonEnabled", huaweiMap.getUiSettings().isMyLocationButtonEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setAllGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setAllGesturesEnabled(val.optBoolean("allGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("rotateGesturesEnabled", huaweiMap.getUiSettings().isRotateGesturesEnabled())</pre><pre>                    .put("scrollGesturesEnabled", huaweiMap.getUiSettings().isScrollGesturesEnabled())</pre><pre>                    .put("zoomGesturesEnabled", huaweiMap.getUiSettings().isZoomGesturesEnabled())</pre><pre>                    .put("tiltGesturesEnabled", huaweiMap.getUiSettings().isTiltGesturesEnabled())</pre><pre>                    .put("scrollGesturesEnabledDuringRotateOrZoom", huaweiMap.getUiSettings().isScrollGesturesEnabledDuringRotateOrZoom());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setCompassEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setCompassEnabled(val.optBoolean("compassEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("compassEnabled", huaweiMap.getUiSettings().isCompassEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setIndoorLevelPickerEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setIndoorLevelPickerEnabled(val.optBoolean("indoorLevelPickerEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("indoorLevelPickerEnabled", huaweiMap.getUiSettings().isIndoorLevelPickerEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMapToolbarEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setMapToolbarEnabled(val.optBoolean("mapToolbarEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("mapToolbarEnabled", huaweiMap.getUiSettings().isMapToolbarEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject run(String methodName, JSONObject args) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>            Method m = this.getClass().getDeclaredMethod(methodName, JSONObject.class);</pre><pre>            <span>return</span> (JSONObject) m.invoke(this, args);</pre><pre>        }</pre><pre></pre><pre>    }</pre><pre></pre><pre>    ////////////////////////////////////////////////////////////HUAWEI MAP SETTERS CAPSULE///////////////////////////////////////////////////////////////////////////</pre><pre>    ////////////////////////////////////////////////////////////HUAWEI MAP SETTERS CAPSULE/////////////////////////////////////////////////</pre><pre></pre><pre>    <span>private</span> class HuaweiMapSetter {</pre><pre></pre><pre>        /* *</pre><pre>        huaweiMap.setMarkersClustering(false);</pre><pre></pre><pre>        huaweiMap.setContentDescription("conte");</pre><pre>        huaweiMap.setLocationSource(null);</pre><pre>        * */</pre><pre>        JSONObject setPadding(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setPadding(json.getInt("left"), json.getInt("top"), json.getInt("right"), json.getInt("bottom"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setTrafficEnabled(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setTrafficEnabled(json.optBoolean("trafficEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("trafficEnabled", huaweiMap.isTrafficEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject resetMinMaxZoomPreference(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.resetMinMaxZoomPreference();</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("minZoomPreference", huaweiMap.getMinZoomLevel()).put("maxZoomPreference", huaweiMap.getMaxZoomLevel());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setGeoPoliticalView(JSONObject json) {</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setWatermarkEnabled(JSONObject json) {</pre><pre>            huaweiMap.setWatermarkEnabled(json.optBoolean("watermarkEnabled"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMinZoomPreference(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMinZoomPreference((float) json.getDouble("minZoomPreference"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("minZoomPreference", huaweiMap.getMinZoomLevel());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMaxZoomPreference(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMaxZoomPreference((float) json.getDouble("maxZoomPreference"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("maxZoomPreference", huaweiMap.getMaxZoomLevel());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMapType(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMapType(json.getInt("mapType"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("mapType", huaweiMap.getMapType());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMapStyle(JSONObject json) {</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setLatLngBoundsForCameraTarget(JSONObject json) {</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setLanguage(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setLanguage(json.getString("language"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setInfoWindowAdapter(JSONObject json) {</pre><pre>            /* DUNNO</pre><pre>            huaweiMap.setInfoWindowAdapter(<span>new</span> HuaweiMap.InfoWindowAdapter() {</pre><pre>                @Override</pre><pre>                <span>public</span> View getInfoContents(Marker marker) {</pre><pre>                    <span>return</span> null;</pre><pre>                }</pre><pre></pre><pre>                @Override</pre><pre>                <span>public</span> View getInfoWindow(Marker marker) {</pre><pre>                    <span>return</span> null;</pre><pre>                }</pre><pre>            });</pre><pre>             */</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setIndoorEnabled(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setIndoorEnabled(json.optBoolean("indoorEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("indoorEnabled", huaweiMap.isIndoorEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setContentDescription(JSONObject json) {</pre><pre>            huaweiMap.setContentDescription(json.optString("contentDescription"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMyLocationEnabled(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMyLocationEnabled(json.optBoolean("myLocationEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("myLocationEnabled", huaweiMap.isMyLocationEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject run(String methodName, JSONObject object) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>            Method m = this.getClass().getDeclaredMethod(methodName, JSONObject.class);</pre><pre>            <span>return</span> (JSONObject) m.invoke(this, object);</pre><pre>        }</pre><pre>    }</pre><pre></pre><pre>    // ///////////////////////////////////////////////////////////////</pre><pre>    // ////////////////// HUAWEI MAP GETTERS CAPSULE ////////////////////////</pre><pre></pre><pre>    <span>private</span> class HuaweiMapGetter {</pre><pre></pre><pre>        <span>public</span> JSONObject getCameraPosition() <span>throws</span> JSONException {</pre><pre>            <span>return</span> ObjectToJson.getInstance().constructJsonFromCameraPosition(huaweiMap.getCameraPosition());</pre><pre>        }</pre><pre></pre><pre></pre><pre>        JSONObject run(String methodName) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>            Method m = this.getClass().getDeclaredMethod(methodName);</pre><pre>            <span>return</span> (JSONObject) m.invoke(this);</pre><pre>        }</pre><pre>    }</pre><pre>}</pre>
    </div>

    <div class="container">
        <pre>package com.development.mapkit;</pre><pre></pre><pre><span>import</span> android.content.Context;</pre><pre><span>import</span> android.graphics.Point;</pre><pre><span>import</span> android.support.annotation.Nullable;</pre><pre></pre><pre><span>import</span> com.development.mapkit.components.CircleCapsule;</pre><pre><span>import</span> com.development.mapkit.components.GroundOverlayCapsule;</pre><pre><span>import</span> com.development.mapkit.components.MapComponent;</pre><pre><span>import</span> com.development.mapkit.components.MapComponentType;</pre><pre><span>import</span> com.development.mapkit.components.MarkerCapsule;</pre><pre><span>import</span> com.development.mapkit.components.PolygonCapsule;</pre><pre><span>import</span> com.development.mapkit.components.PolylineCapsule;</pre><pre><span>import</span> com.development.mapkit.components.TileOverlayCapsule;</pre><pre><span>import</span> com.development.mapkit.listeners.MapListener;</pre><pre><span>import</span> com.development.mapkit.utils.json.JsonToObject;</pre><pre><span>import</span> com.development.mapkit.utils.json.ObjectToJson;</pre><pre><span>import</span> com.huawei.hms.maps.HuaweiMap;</pre><pre><span>import</span> com.huawei.hms.maps.TextureMapView;</pre><pre><span>import</span> com.huawei.hms.maps.model.LatLng;</pre><pre></pre><pre><span>import</span> org.json.JSONException;</pre><pre><span>import</span> org.json.JSONObject;</pre><pre></pre><pre><span>import</span> java.lang.reflect.InvocationTargetException;</pre><pre><span>import</span> java.lang.reflect.Method;</pre><pre><span>import</span> java.util.HashMap;</pre><pre><span>import</span> java.util.Map;</pre><pre></pre><pre></pre><pre><span>public</span> final class MapCapsule {</pre><pre></pre><pre></pre><pre></pre><pre>    <span>private</span> final UiSettingsSetter uiSettingsSetter = <span>new</span> UiSettingsSetter();</pre><pre>    <span>private</span> final HuaweiMapSetter huaweiMapSetter = <span>new</span> HuaweiMapSetter();</pre><pre>    <span>private</span> final HuaweiMapGetter huaweiMapGetter = <span>new</span> HuaweiMapGetter();</pre><pre>    <span>private</span> MapListener mapListener;</pre><pre></pre><pre>    <span>public</span> MapCapsule(Context mContext, MapListener mapListener, @Nullable JSONObject mapOptions) {</pre><pre>        capsuleId = ++id;</pre><pre>        componentMap = <span>new</span> HashMap<>();</pre><pre>        this.mapListener = mapListener;</pre><pre>        textureMapView = <span>new</span> TextureMapView(mContext, JsonToObject.getInstance().constructMapOptions(mapOptions));</pre><pre>        textureMapView.onCreate(null);</pre><pre>    }</pre><pre style='color:green;'>    public void test(){</pre><pre style='color:green;'>        System.out.println("Test method");</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject setMapListener(String eventName) <span>throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException {</pre><pre>        mapListener.bindListener(this.huaweiMap, eventName, this.capsuleId);</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> MapComponent addComponent(MapComponentType type, JSONObject json) {</pre><pre></pre><pre>        MapComponent mapComponent = null;</pre><pre>        try {</pre><pre>            <span>if</span> (type == MapComponentType.MARKER)</pre><pre>                mapComponent = <span>new</span> MarkerCapsule(huaweiMap, JsonToObject.getInstance().constructMarkerOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.CIRCLE)</pre><pre>                mapComponent = <span>new</span> CircleCapsule(huaweiMap, JsonToObject.getInstance().constructCircleOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.GROUND_OVERLAY)</pre><pre>                mapComponent = <span>new</span> GroundOverlayCapsule(huaweiMap, JsonToObject.getInstance().constructGroundOverlayOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.POLYGON)</pre><pre>                mapComponent = <span>new</span> PolygonCapsule(huaweiMap, JsonToObject.getInstance().constructPolygonOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.POLYLINE)</pre><pre>                mapComponent = <span>new</span> PolylineCapsule(huaweiMap, JsonToObject.getInstance().constructPolylineOptions(json));</pre><pre>            <span>else</span> <span>if</span> (type == MapComponentType.TILE_OVERLAY)</pre><pre>                mapComponent = <span>new</span> TileOverlayCapsule(huaweiMap, JsonToObject.getInstance().constructTileOverlayOptions(json));</pre><pre>        } catch (JSONException e) {</pre><pre>            e.printStackTrace();</pre><pre>        }</pre><pre>        componentMap.put(mapComponent.getObjectId(), mapComponent);</pre><pre>        <span>return</span> mapComponent;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> boolean removeComponent(int componentId) {</pre><pre>        <span>if</span> (!componentMap.containsKey(componentId)) <span>return</span> false;</pre><pre>        componentMap.get(componentId).remove();</pre><pre>        componentMap.remove(componentId);</pre><pre>        <span>return</span> true;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject moveCamera(String eventName, JSONObject json) <span>throws</span> JSONException {</pre><pre>        huaweiMap.moveCamera(JsonToObject.getInstance().constructCameraUpdate(eventName, json));</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject animateCamera(String eventName, JSONObject json) <span>throws</span> JSONException {</pre><pre>        huaweiMap.animateCamera(JsonToObject.getInstance().constructCameraUpdate(eventName, json));</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre></pre><pre>    <span>public</span> JSONObject setMapOptions(String optionType, String methodName, JSONObject args) <span>throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException, JSONException {</pre><pre>        <span>if</span> (optionType.equals("setUiSettings")) <span>return</span> setMapUiSettings(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("setHuaweiMapOptions")) <span>return</span> setMapSettings(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("getHuaweiMapOptions")) <span>return</span> getMapSettings(methodName);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("moveCamera")) <span>return</span> moveCamera(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("animateCamera")) <span>return</span> animateCamera(methodName, args);</pre><pre>        <span>else</span> <span>if</span> (optionType.equals("setListener")) <span>return</span> setMapListener(methodName);</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>private</span> JSONObject getMapSettings(String methodName) <span>throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException {</pre><pre>        <span>return</span> huaweiMapGetter.run(methodName);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject setMapUiSettings(String methodName, JSONObject args) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>        <span>return</span> uiSettingsSetter.run(methodName, args);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> JSONObject setMapSettings(String methodName, JSONObject json) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>        <span>return</span> huaweiMapSetter.run(methodName, json);</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> MapComponent getComponent(int id) {</pre><pre>        <span>if</span> (componentMap.containsKey(id)) {</pre><pre>            <span>return</span> componentMap.get(id);</pre><pre>        }</pre><pre>        <span>return</span> null;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> TextureMapView getTextureMapView() {</pre><pre>        <span>return</span> textureMapView;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> <span>void</span> setHuaweiMap(HuaweiMap map) {</pre><pre>        this.huaweiMap = map;</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> <span>void</span> projectionStuff() {</pre><pre>        huaweiMap.getProjection().fromScreenLocation(<span>new</span> Point(1, 2));</pre><pre>        huaweiMap.getProjection().toScreenLocation(<span>new</span> LatLng(1, 2));</pre><pre>        huaweiMap.getProjection().getVisibleRegion();</pre><pre>    }</pre><pre></pre><pre>    <span>public</span> <span>void</span> focusedBuilding() {</pre><pre>        huaweiMap.getFocusedBuilding().getActiveLevelIndex();</pre><pre>        huaweiMap.getFocusedBuilding().getDefaultLevelIndex();</pre><pre>        huaweiMap.getFocusedBuilding().isUnderground();</pre><pre>        huaweiMap.getFocusedBuilding().getLevels();</pre><pre>    }</pre><pre></pre><pre></pre><pre>    <span>public</span> JSONObject toJson() {</pre><pre>        try {</pre><pre></pre><pre>            <span>return</span> <span>new</span> JSONObject()</pre><pre>                    .put("id", capsuleId)</pre><pre>                    .put("cameraPosition", ObjectToJson.getInstance().constructJsonFromCameraPosition(huaweiMap.getCameraPosition()))</pre><pre>                    .put("uiSettings", ObjectToJson.getInstance().constructJsonFromHuaweiMapUiSettings(huaweiMap.getUiSettings()))</pre><pre>                    .put("mapType", huaweiMap.getMapType())</pre><pre>                    .put("maxZoomLevel", huaweiMap.getMaxZoomLevel())</pre><pre>                    .put("minZoomLevel", huaweiMap.getMinZoomLevel())</pre><pre>                    .put("projection", huaweiMap.getProjection()) // change this</pre><pre>                    .put("indoorBuilding", huaweiMap.getFocusedBuilding()) // change this</pre><pre>                    .put("buildingsEnabled", huaweiMap.isBuildingsEnabled())</pre><pre>                    .put("indoorEnabled", huaweiMap.isIndoorEnabled())</pre><pre>                    .put("myLocationEnabled", huaweiMap.isMyLocationEnabled())</pre><pre>                    .put("trafficEnabled", huaweiMap.isTrafficEnabled());</pre><pre>        } catch (JSONException e) {</pre><pre>            e.printStackTrace();</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre>    }</pre><pre></pre><pre></pre><pre>    ////////////////////////////////////////////// UI SETTINGS CAPSULE ////////////////////////////////////////////////////////////</pre><pre>    ////////////////////////////////////////////// UI SETTINGS CAPSULE /////////////////////////////////////////////////////////////</pre><pre></pre><pre>    <span>private</span> class UiSettingsSetter {</pre><pre></pre><pre>        JSONObject setZoomGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setZoomGesturesEnabled(val.optBoolean("zoomGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("zoomGesturesEnabled", huaweiMap.getUiSettings().isZoomGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setTiltGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setTiltGesturesEnabled(val.optBoolean("tiltGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("tiltGesturesEnabled", huaweiMap.getUiSettings().isTiltGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setZoomControlsEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setZoomControlsEnabled(val.optBoolean("zoomControlsEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("zoomControlsEnabled", huaweiMap.getUiSettings().isZoomControlsEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setScrollGesturesEnabledDuringRotateOrZoom(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setScrollGesturesEnabledDuringRotateOrZoom(val.optBoolean("scrollGesturesEnabledDuringRotateOrZoom"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("scrollGesturesEnabledDuringRotateOrZoom", huaweiMap.getUiSettings().isScrollGesturesEnabledDuringRotateOrZoom());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setScrollGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setScrollGesturesEnabled(val.optBoolean("scrollGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("scrollGesturesEnabled", huaweiMap.getUiSettings().isScrollGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setRotateGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setRotateGesturesEnabled(val.optBoolean("rotateGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("rotateGesturesEnabled", huaweiMap.getUiSettings().isRotateGesturesEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMyLocationButtonEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setMyLocationButtonEnabled(val.optBoolean("myLocationButtonEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("myLocationButtonEnabled", huaweiMap.getUiSettings().isMyLocationButtonEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setAllGesturesEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setAllGesturesEnabled(val.optBoolean("allGesturesEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("rotateGesturesEnabled", huaweiMap.getUiSettings().isRotateGesturesEnabled())</pre><pre>                    .put("scrollGesturesEnabled", huaweiMap.getUiSettings().isScrollGesturesEnabled())</pre><pre>                    .put("zoomGesturesEnabled", huaweiMap.getUiSettings().isZoomGesturesEnabled())</pre><pre>                    .put("tiltGesturesEnabled", huaweiMap.getUiSettings().isTiltGesturesEnabled())</pre><pre>                    .put("scrollGesturesEnabledDuringRotateOrZoom", huaweiMap.getUiSettings().isScrollGesturesEnabledDuringRotateOrZoom());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setCompassEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setCompassEnabled(val.optBoolean("compassEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("compassEnabled", huaweiMap.getUiSettings().isCompassEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setIndoorLevelPickerEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setIndoorLevelPickerEnabled(val.optBoolean("indoorLevelPickerEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("indoorLevelPickerEnabled", huaweiMap.getUiSettings().isIndoorLevelPickerEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMapToolbarEnabled(JSONObject val) <span>throws</span> JSONException {</pre><pre>            huaweiMap.getUiSettings().setMapToolbarEnabled(val.optBoolean("mapToolbarEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("mapToolbarEnabled", huaweiMap.getUiSettings().isMapToolbarEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject run(String methodName, JSONObject args) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>            Method m = this.getClass().getDeclaredMethod(methodName, JSONObject.class);</pre><pre>            <span>return</span> (JSONObject) m.invoke(this, args);</pre><pre>        }</pre><pre></pre><pre>    }</pre><pre></pre><pre>    ////////////////////////////////////////////////////////////HUAWEI MAP SETTERS CAPSULE///////////////////////////////////////////////////////////////////////////</pre><pre>    ////////////////////////////////////////////////////////////HUAWEI MAP SETTERS CAPSULE/////////////////////////////////////////////////</pre><pre></pre><pre>    <span>private</span> class HuaweiMapSetter {</pre><pre></pre><pre>        /* *</pre><pre>        huaweiMap.setMarkersClustering(false);</pre><pre></pre><pre>        huaweiMap.setContentDescription("conte");</pre><pre>        huaweiMap.setLocationSource(null);</pre><pre>        * */</pre><pre>        JSONObject setPadding(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setPadding(json.getInt("left"), json.getInt("top"), json.getInt("right"), json.getInt("bottom"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setTrafficEnabled(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setTrafficEnabled(json.optBoolean("trafficEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("trafficEnabled", huaweiMap.isTrafficEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject resetMinMaxZoomPreference(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.resetMinMaxZoomPreference();</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("minZoomPreference", huaweiMap.getMinZoomLevel()).put("maxZoomPreference", huaweiMap.getMaxZoomLevel());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setGeoPoliticalView(JSONObject json) {</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setWatermarkEnabled(JSONObject json) {</pre><pre>            huaweiMap.setWatermarkEnabled(json.optBoolean("watermarkEnabled"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMinZoomPreference(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMinZoomPreference((float) json.getDouble("minZoomPreference"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("minZoomPreference", huaweiMap.getMinZoomLevel());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMaxZoomPreference(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMaxZoomPreference((float) json.getDouble("maxZoomPreference"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("maxZoomPreference", huaweiMap.getMaxZoomLevel());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMapType(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMapType(json.getInt("mapType"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("mapType", huaweiMap.getMapType());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMapStyle(JSONObject json) {</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setLatLngBoundsForCameraTarget(JSONObject json) {</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setLanguage(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setLanguage(json.getString("language"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setInfoWindowAdapter(JSONObject json) {</pre><pre>            /* DUNNO</pre><pre>            huaweiMap.setInfoWindowAdapter(<span>new</span> HuaweiMap.InfoWindowAdapter() {</pre><pre>                @Override</pre><pre>                <span>public</span> View getInfoContents(Marker marker) {</pre><pre>                    <span>return</span> null;</pre><pre>                }</pre><pre></pre><pre>                @Override</pre><pre>                <span>public</span> View getInfoWindow(Marker marker) {</pre><pre>                    <span>return</span> null;</pre><pre>                }</pre><pre>            });</pre><pre>             */</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setIndoorEnabled(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setIndoorEnabled(json.optBoolean("indoorEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("indoorEnabled", huaweiMap.isIndoorEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject setContentDescription(JSONObject json) {</pre><pre>            huaweiMap.setContentDescription(json.optString("contentDescription"));</pre><pre>            <span>return</span> null;</pre><pre>        }</pre><pre></pre><pre>        JSONObject setMyLocationEnabled(JSONObject json) <span>throws</span> JSONException {</pre><pre>            huaweiMap.setMyLocationEnabled(json.optBoolean("myLocationEnabled"));</pre><pre>            <span>return</span> <span>new</span> JSONObject().put("myLocationEnabled", huaweiMap.isMyLocationEnabled());</pre><pre>        }</pre><pre></pre><pre>        JSONObject run(String methodName, JSONObject object) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>            Method m = this.getClass().getDeclaredMethod(methodName, JSONObject.class);</pre><pre>            <span>return</span> (JSONObject) m.invoke(this, object);</pre><pre>        }</pre><pre>    }</pre><pre></pre><pre>    // ///////////////////////////////////////////////////////////////</pre><pre>    // ////////////////// HUAWEI MAP GETTERS CAPSULE ////////////////////////</pre><pre></pre><pre>    <span>private</span> class HuaweiMapGetter {</pre><pre></pre><pre>        <span>public</span> JSONObject getCameraPosition() <span>throws</span> JSONException {</pre><pre>            <span>return</span> ObjectToJson.getInstance().constructJsonFromCameraPosition(huaweiMap.getCameraPosition());</pre><pre>        }</pre><pre></pre><pre></pre><pre>        JSONObject run(String methodName) <span>throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException {</pre><pre>            Method m = this.getClass().getDeclaredMethod(methodName);</pre><pre>            <span>return</span> (JSONObject) m.invoke(this);</pre><pre>        }</pre><pre>    }</pre><pre>}</pre>
    </div>
</body>

</html>
